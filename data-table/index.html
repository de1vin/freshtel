<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Table</title>
    <style>
        .data-table-form {
            position: sticky;
            top: 0;
        }
        .data-table-form input {
            width: calc(100% - 10px);
            min-width: auto;
        }
        .data-table-content{
            width: 100%;
            border-collapse: collapse;
        }
        .data-table-content td {
            padding: 5px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }
        .data-table-header {
            width: 100%;
            background: #f0f0f0;
            border-collapse: collapse;
            margin-bottom: 10px;
        }
        .data-table-header td {
            padding: 5px;
            box-sizing: border-box;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
<div class="data-table-container">
    <form action="table-data-1.html" class="data-table-form">
    <table class="data-table-header">
        <tr>
            <td colspan="16">string</td>
        </tr>
        <tr>
            <td>column 1</td>
            <td>column 2</td>
            <td>column 3</td>
            <td>column 4</td>
            <td>column 5</td>
            <td>column 6</td>
            <td>column 7</td>
            <td>column 8</td>
            <td>column 9</td>
            <td>column 10</td>
            <td>column 11</td>
            <td>column 12</td>
            <td>column 13</td>
            <td>column 14</td>
            <td>column 15</td>
            <td>column 16</td>
        </tr>
        <tr>
            <td><input type="text" name="input_1" placeholder="filter"></td>
            <td><input type="text" name="input_2" placeholder="filter"></td>
            <td><input type="text" name="input_3" placeholder="filter"></td>
            <td><input type="text" name="input_4" placeholder="filter"></td>
            <td><input type="text" name="input_5" placeholder="filter"></td>
            <td><input type="text" name="input_6" placeholder="filter"></td>
            <td><input type="text" name="input_7" placeholder="filter"></td>
            <td><input type="text" name="input_8" placeholder="filter"></td>
            <td><input type="text" name="input_9" placeholder="filter"></td>
            <td><input type="text" name="input_10" placeholder="filter"></td>
            <td><input type="text" name="input_11" placeholder="filter"></td>
            <td><input type="text" name="input_12" placeholder="filter"></td>
            <td><input type="text" name="input_13" placeholder="filter"></td>
            <td><input type="text" name="input_14" placeholder="filter"></td>
            <td><input type="text" name="input_15" placeholder="filter"></td>
            <td><input type="text" name="input_16" placeholder="filter"></td>
        </tr>
        <tr>
            <td colspan="16">string</td>
        </tr>
    </table>
    </form>
    <table class="data-table-content">
        <tr>
            <td colspan="16">string</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1content 1</td>
            <td>content 1</td>
            <td>content 1content ent 1</td>
            <td>content 1</td>
            <td>content 1</td>
            <td>content 1content 1</td>
            <td>content 1</td>
            <td>content 1ntent 1ntent 1</td>
            <td>contentcontentcontent 1</td>
            <td>content 1</td>
        </tr>
        <tr>
            <td colspan="16">string</td>
        </tr>
    </table>
</div>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function(){
        const filterForm = document.querySelector('.data-table-form');
        const contentTable = document.querySelector('.data-table-content');

        Array.from(filterForm.elements).forEach(element => {
            element.addEventListener('change', fetchData, false);
        });

        window.addEventListener('resize', updateHeader);

        updateHeader();

        function fetchData() {
            const action = filterForm.getAttribute('action');
            const data = {};
            Array.from(filterForm.elements).forEach(element => {
                data[element.name] = element.value;
            });
            axios.get(action, {params: data})
                .then(function (response) {
                    let parser = new DOMParser;
                    let doc = parser.parseFromString(response.data, 'text/html');
                    let newContent = doc.querySelector('.data-table-content');
                    if (newContent) {
                        contentTable.style.visibility = 'hidden';
                        contentTable.innerHTML = newContent.innerHTML;
                        setTimeout(function () {
                            updateHeader();
                            contentTable.style.visibility = 'visible';
                        }, 500)
                    }
                }).catch(function (error) {
                    console.log(error);
                })
                .finally(function () {
                    console.log('finish');
                });
        }

        function updateHeader() {
            const firstHeaderRow = document.querySelectorAll('table.data-table-header tr:nth-child(2) td');
            const firstDataRow = document.querySelectorAll('table.data-table-content tr:nth-child(2) td');

            if (firstHeaderRow.length !== firstDataRow.length) {
                console.log(firstHeaderRow.length, firstDataRow.length, 'Mismatch number of columns');
                return;
            }

            for (let i = 0; i < firstDataRow.length; i++) {
                let columnWidth = firstDataRow[i].offsetWidth;
                firstHeaderRow[i].style.width = columnWidth + 'px';
                if (firstHeaderRow[i].offsetWidth !== firstDataRow[i].offsetWidth) {
                    firstDataRow[i].style.width = firstHeaderRow[i].offsetWidth + 'px';
                }
            }
        }
    });
</script>
</body>
</html>
